{"code":"(this.webpackJsonptoptracks=this.webpackJsonptoptracks||[]).push([[0],{111:function(e,t,c){\"use strict\";c.r(t);var a=c(0),n=c.n(a),r=c(32),s=c.n(r),i=(c(50),c(51),c(52),c(112)),o=c(2);function u(){return Object(o.jsx)(i.a,{className:\"d-flex justify-content-center align-items-center\",style:{minHeight:\"100vh\"},children:Object(o.jsx)(\"a\",{className:\"btn btn-success btn-lg\",href:\"https://accounts.spotify.com/authorize?client_id=9065c82d679c48b09c2df99999c34034&response_type=code&redirect_uri=http://localhost:3000&scope=user-library-read%20user-read-email%20user-read-private%20streaming%20playlist-read-private%20user-read-playback-position%20user-library-modify%20playlist-modify-private%20user-modify-playback-state%20playlist-modify-public user-top-read%20user-read-playback-state%20ugc-image-upload\",children:\"Login\"})})}var l=c(15),d=c.n(l),j=c(33),f=c(7),b=c(16),h=c.n(b);var m=c(113),p=c(34),O=c.n(p);function v(e){var t=e.track,c=e.chooseTrack;return Object(o.jsxs)(\"div\",{className:\"d-flex m-2 align-items-center\",style:{cursor:\"pointer\"},onClick:function(){c(t)},children:[Object(o.jsx)(\"img\",{src:t.art,style:{height:\"64px\",width:\"64px\"}}),Object(o.jsx)(\"div\",{className:\"m-3\",children:Object(o.jsx)(\"div\",{children:t.name})})]})}function x(e){var t=e.artist,c=e.getArtistTracks;return Object(o.jsxs)(\"div\",{className:\"d-flex m-2 align-items-center\",style:{cursor:\"pointer\"},onClick:function(){c(t.name)},children:[Object(o.jsx)(\"img\",{src:t.artistUrl,style:{height:\"64px\",width:\"64px\"}}),Object(o.jsx)(\"div\",{className:\"m-3\",children:Object(o.jsx)(\"div\",{children:t.name})})]})}var y=c(43);function g(e){var t=e.accessToken,c=e.trackUri,n=Object(a.useState)(!1),r=Object(f.a)(n,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){return i(!0)}),[c]),t?Object(o.jsx)(y.a,{token:t,showSaveIcon:!0,callback:function(e){e.isPlaying||i(!1)},play:s,uris:c?[c]:[]}):null}var k=new O.a({client_id:\"9065c82d679c48b09c2df99999c34034\"});function w(e){var t=function(e){var t=Object(a.useState)(),c=Object(f.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(),i=Object(f.a)(s,2),o=i[0],u=i[1],l=Object(a.useState)(),d=Object(f.a)(l,2),j=d[0],b=d[1];return Object(a.useEffect)((function(){h.a.post(\"http://localhost:3001/login\",{code:e}).then((function(e){r(e.data.accessToken),u(e.data.refreshToken),b(e.data.expiresIn),window.history.pushState({},null,\"/\")})).catch((function(){window.location=\"/\"}))}),[e]),Object(a.useEffect)((function(){if(o&&j){var e=setInterval((function(){h.a.post(\"http://localhost:3001/refresh\",{refreshToken:o}).then((function(e){r(e.data.accessToken),b(e.data.expiresIn)})).catch((function(){window.location=\"/\"}))}),1e3*(j-60));return function(){return clearInterval(e)}}}),[o,j]),n}(e.code),c=Object(a.useState)(\"\"),n=Object(f.a)(c,2),r=n[0],s=n[1],u=Object(a.useState)([]),l=Object(f.a)(u,2),b=l[0],p=l[1],O=Object(a.useState)([]),y=Object(f.a)(O,2),w=(y[0],y[1],Object(a.useState)([])),S=Object(f.a)(w,2),T=S[0],N=S[1],E=Object(a.useState)([]),I=Object(f.a)(E,2),A=I[0],U=I[1];function C(e){U(e),s(\"\")}function _(e){s(\"\"),k.searchTracks(\"artist:\"+e,{limit:50}).then((function(e){N(e.body.tracks.items.map((function(e){var t=\"\";try{t=e.album.images[2].url}catch(c){console.log(c.message)}return{name:e.name,uri:e.uri,art:t}})))}))}return Object(a.useEffect)((function(){t&&k.setAccessToken(t)}),[t]),Object(a.useEffect)((function(){if(!r)return p([]);if(t){Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.searchArtists(r);case 2:t=e.sent,p(t.body.artists.items.map((function(e){var t=\"\";try{t=e.images[0].url}catch(c){console.log(\"No image\")}return{name:e.name,id:e.id,artistUrl:t}})));case 4:case\"end\":return e.stop()}}),e)})))()}}),[r,t]),Object(o.jsxs)(i.a,{className:\"d-flex flex-column py-2\",style:{height:\"100vh\"},children:[Object(o.jsx)(m.a.Control,{type:\"search\",placeholder:\"Search Artists\",value:r,onChange:function(e){return s(e.target.value)}}),Object(o.jsxs)(\"div\",{className:\"flex-grow-1 my-2\",style:{overflowY:\"auto\"},children:[b.map((function(e){return Object(o.jsx)(x,{artist:e,getArtistTracks:_})})),T.map((function(e){return Object(o.jsx)(v,{track:e,chooseTrack:C})}))]}),Object(o.jsx)(\"div\",{children:Object(o.jsx)(g,{accessToken:t,trackUri:null===A||void 0===A?void 0:A.uri})})]})}var S=new URLSearchParams(window.location.search).get(\"code\");var T=function(){return S?Object(o.jsx)(w,{code:S}):Object(o.jsx)(u,{})};s.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(T,{})}),document.getElementById(\"root\"))},50:function(e,t,c){},51:function(e,t,c){},90:function(e,t){}},[[111,1,2]]]);","name":"static/js/main.c43108e6.chunk.js","map":{"version":3,"sources":["static/js/main.c43108e6.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","react","react_default","n","react_dom","react_dom_default","Container","jsx_runtime","SpotifyLogin","Object","className","style","minHeight","children","href","regenerator","regenerator_default","asyncToGenerator","slicedToArray","axios","axios_default","Form","client","client_default","TrackSearchResult","_ref","track","chooseTrack","cursor","onClick","src","art","height","width","name","ArtistSearchResult","artist","getArtistTracks","artistUrl","esm","Player","accessToken","trackUri","_useState","_useState2","play","setPlay","token","showSaveIcon","callback","state","isPlaying","uris","spotifyApi","a","client_id","Dashboard","code","setAccessToken","_useState3","_useState4","refreshToken","setRefreshToken","_useState5","_useState6","expiresIn","setExpiresIn","post","then","res","data","window","history","pushState","catch","location","interval","setInterval","clearInterval","useAuth","search","setSearch","searchResults","setSearchResults","_useState7","_useState8","trackResults","setTrackResults","_useState9","_useState10","playingTrack","setPlayingTrack","artistName","searchTracks","limit","body","tracks","items","map","trackImage","album","images","url","err","console","log","message","uri","mark","_callee","wrap","_context","prev","next","searchArtists","sent","artists","artistImage","id","stop","Control","type","placeholder","value","onChange","e","target","overflowY","App_code","URLSearchParams","get","src_App","render","StrictMode","document","getElementById","exports"],"mappings":"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"},"input":"(this[\"webpackJsonptoptracks\"] = this[\"webpackJsonptoptracks\"] || []).push([[0],{\n\n/***/ 111:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(32);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(50);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./node_modules/bootstrap/dist/css/bootstrap.min.css\nvar bootstrap_min = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Container.js\nvar Container = __webpack_require__(112);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/components/SpotifyLogin.js\nvar AUTH_URL=\"https://accounts.spotify.com/authorize?client_id=9065c82d679c48b09c2df99999c34034&response_type=code&redirect_uri=http://localhost:3000&scope=user-library-read%20user-read-email%20user-read-private%20streaming%20playlist-read-private%20user-read-playback-position%20user-library-modify%20playlist-modify-private%20user-modify-playback-state%20playlist-modify-public user-top-read%20user-read-playback-state%20ugc-image-upload\";function SpotifyLogin(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Container[\"a\" /* default */],{className:\"d-flex justify-content-center align-items-center\",style:{minHeight:\"100vh\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{className:\"btn btn-success btn-lg\",href:AUTH_URL,children:\"Login\"})});}\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(15);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(33);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(16);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/components/useAuth.js\nfunction useAuth(code){var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),accessToken=_useState2[0],setAccessToken=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),refreshToken=_useState4[0],setRefreshToken=_useState4[1];var _useState5=Object(react[\"useState\"])(),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),expiresIn=_useState6[0],setExpiresIn=_useState6[1];Object(react[\"useEffect\"])(function(){axios_default.a.post(\"http://localhost:3001/login\",{code:code}).then(function(res){setAccessToken(res.data.accessToken);setRefreshToken(res.data.refreshToken);setExpiresIn(res.data.expiresIn);window.history.pushState({},null,\"/\");}).catch(function(){window.location=\"/\";});},[code]);Object(react[\"useEffect\"])(function(){if(!refreshToken||!expiresIn)return;var interval=setInterval(function(){axios_default.a.post(\"http://localhost:3001/refresh\",{refreshToken:refreshToken}).then(function(res){setAccessToken(res.data.accessToken);setExpiresIn(res.data.expiresIn);}).catch(function(){window.location=\"/\";});},(expiresIn-60)*1000);return function(){return clearInterval(interval);};},[refreshToken,expiresIn]);return accessToken;}\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Form.js + 16 modules\nvar Form = __webpack_require__(113);\n\n// EXTERNAL MODULE: ./node_modules/spotify-web-api-node/src/client.js\nvar client = __webpack_require__(34);\nvar client_default = /*#__PURE__*/__webpack_require__.n(client);\n\n// CONCATENATED MODULE: ./src/components/TrackSearchResult.js\nfunction TrackSearchResult(_ref){var track=_ref.track,chooseTrack=_ref.chooseTrack;function handlePlay(){chooseTrack(track);}//console.log(artist);\nreturn/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex m-2 align-items-center\",style:{cursor:\"pointer\"},onClick:handlePlay,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:track.art,style:{height:\"64px\",width:\"64px\"}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"m-3\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:track.name})})]});}\n// CONCATENATED MODULE: ./src/components/ArtistSearchResult.js\nfunction ArtistSearchResult(_ref){var artist=_ref.artist,getArtistTracks=_ref.getArtistTracks;function handleClick(){getArtistTracks(artist.name);}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex m-2 align-items-center\",style:{cursor:\"pointer\"},onClick:handleClick,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:artist.artistUrl,style:{height:\"64px\",width:\"64px\"}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"m-3\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:artist.name})})]});}\n// EXTERNAL MODULE: ./node_modules/react-spotify-web-playback/esm/index.js + 31 modules\nvar esm = __webpack_require__(43);\n\n// CONCATENATED MODULE: ./src/components/Player.js\nfunction Player(_ref){var accessToken=_ref.accessToken,trackUri=_ref.trackUri;var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),play=_useState2[0],setPlay=_useState2[1];Object(react[\"useEffect\"])(function(){return setPlay(true);},[trackUri]);if(!accessToken)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(esm[\"a\" /* default */],{token:accessToken,showSaveIcon:true,callback:function callback(state){if(!state.isPlaying)setPlay(false);},play:play,uris:trackUri?[trackUri]:[]});}\n// CONCATENATED MODULE: ./src/components/Dashboard.js\nvar spotifyApi=new client_default.a({client_id:\"9065c82d679c48b09c2df99999c34034\"});function Dashboard(_ref){var code=_ref.code;var accessToken=useAuth(code);var _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];var _useState5=Object(react[\"useState\"])([]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),albumResults=_useState6[0],setAlbumResults=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),trackResults=_useState8[0],setTrackResults=_useState8[1];// console.log(searchResults);\n// console.log(albumResults);\nvar _useState9=Object(react[\"useState\"])([]),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),playingTrack=_useState10[0],setPlayingTrack=_useState10[1];//console.log(searchResults);\nfunction chooseTrack(track){setPlayingTrack(track);setSearch(\"\");}function getArtistTracks(artistName){setSearch(\"\");spotifyApi.searchTracks(\"artist:\"+artistName,{limit:50}).then(function(res){setTrackResults(res.body.tracks.items.map(function(track){var trackImage=\"\";//console.log(track);\ntry{trackImage=track.album.images[2].url;}catch(err){console.log(err.message);}return{name:track.name,uri:track.uri,art:trackImage};}));});}Object(react[\"useEffect\"])(function(){if(!accessToken)return;spotifyApi.setAccessToken(accessToken);},[accessToken]);Object(react[\"useEffect\"])(function(){if(!search)return setSearchResults([]);if(!accessToken)return;var cancel=false;Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var res;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return spotifyApi.searchArtists(search);case 2:res=_context.sent;//console.log(res.body);\nsetSearchResults(res.body.artists.items.map(function(artist){//console.log(artist);\n// if (typeof artist.image != \"undefined\") {\n//   var artistImage = artist.images[0].url;\n//   console.log(artistImage);\n// }\nvar artistImage=\"\";try{artistImage=artist.images[0].url;}catch(err){console.log(\"No image\");}//console.log(artist);\nreturn{name:artist.name,// title: track.name,\nid:artist.id,artistUrl:artistImage};}));case 4:case\"end\":return _context.stop();}}},_callee);}))();//return () => (cancel = true);\n},[search,accessToken]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */],{className:\"d-flex flex-column py-2\",style:{height:\"100vh\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"search\",placeholder:\"Search Artists\",value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"flex-grow-1 my-2\",style:{overflowY:\"auto\"},children:[searchResults.map(function(artist){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ArtistSearchResult,{artist:artist,getArtistTracks:getArtistTracks});}),trackResults.map(function(track){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TrackSearchResult,{track:track,chooseTrack:chooseTrack});})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Player,{accessToken:accessToken,trackUri:playingTrack===null||playingTrack===void 0?void 0:playingTrack.uri})})]});}\n// CONCATENATED MODULE: ./src/App.js\nvar App_code=new URLSearchParams(window.location.search).get(\"code\");function App_App(){return App_code?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Dashboard,{code:App_code}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SpotifyLogin,{});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 90:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ })\n\n},[[111,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/components/SpotifyLogin.js","C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/components/useAuth.js","C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/components/TrackSearchResult.js","C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/components/ArtistSearchResult.js","C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/components/Player.js","C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/components/Dashboard.js","C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/App.js","C:/Users/Najan/Desktop/TopTracks/SpTopify/toptracks/src/index.js","C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\src\\index.css","C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\src\\App.css","ignored C:\\Users\\Najan\\Desktop\\TopTracks\\SpTopify\\toptracks\\node_modules\\object-inspect ./util.inspect"],"names":["AUTH_URL","SpotifyLogin","minHeight","useAuth","code","useState","accessToken","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","useEffect","axios","post","then","res","data","window","history","pushState","catch","location","interval","setInterval","clearInterval","TrackSearchResult","track","chooseTrack","handlePlay","cursor","art","height","width","name","ArtistSearchResult","artist","getArtistTracks","handleClick","artistUrl","Player","trackUri","play","setPlay","state","isPlaying","spotifyApi","SpotifyWebApi","client_id","Dashboard","search","setSearch","searchResults","setSearchResults","albumResults","setAlbumResults","trackResults","setTrackResults","playingTrack","setPlayingTrack","artistName","searchTracks","limit","body","tracks","items","map","trackImage","album","images","url","err","console","log","message","uri","cancel","searchArtists","artists","artistImage","id","e","target","value","overflowY","URLSearchParams","get","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["import React from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nconst AUTH_URL =\r\n  \"https://accounts.spotify.com/authorize?client_id=9065c82d679c48b09c2df99999c34034&response_type=code&redirect_uri=http://localhost:3000&scope=user-library-read%20user-read-email%20user-read-private%20streaming%20playlist-read-private%20user-read-playback-position%20user-library-modify%20playlist-modify-private%20user-modify-playback-state%20playlist-modify-public user-top-read%20user-read-playback-state%20ugc-image-upload\";\r\n\r\nexport default function SpotifyLogin() {\r\n  return (\r\n    <Container\r\n      className=\"d-flex justify-content-center align-items-center\"\r\n      style={{ minHeight: \"100vh\" }}\r\n    >\r\n      <a className=\"btn btn-success btn-lg\" href={AUTH_URL}>\r\n        Login\r\n      </a>\r\n    </Container>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nexport default function useAuth(code) {\r\n  const [accessToken, setAccessToken] = useState();\r\n  const [refreshToken, setRefreshToken] = useState();\r\n  const [expiresIn, setExpiresIn] = useState();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\"http://localhost:3001/login\", {\r\n        code,\r\n      })\r\n      .then((res) => {\r\n        setAccessToken(res.data.accessToken);\r\n        setRefreshToken(res.data.refreshToken);\r\n        setExpiresIn(res.data.expiresIn);\r\n        window.history.pushState({}, null, \"/\");\r\n      })\r\n      .catch(() => {\r\n        window.location = \"/\";\r\n      });\r\n  }, [code]);\r\n\r\n  useEffect(() => {\r\n    if (!refreshToken || !expiresIn) return;\r\n    const interval = setInterval(() => {\r\n      axios\r\n        .post(\"http://localhost:3001/refresh\", {\r\n          refreshToken,\r\n        })\r\n        .then((res) => {\r\n          setAccessToken(res.data.accessToken);\r\n          setExpiresIn(res.data.expiresIn);\r\n        })\r\n        .catch(() => {\r\n          window.location = \"/\";\r\n        });\r\n    }, (expiresIn - 60) * 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [refreshToken, expiresIn]);\r\n  return accessToken;\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function TrackSearchResult({ track, chooseTrack }) {\r\n  function handlePlay() {\r\n    chooseTrack(track);\r\n  }\r\n  //console.log(artist);\r\n  return (\r\n    <div\r\n      className=\"d-flex m-2 align-items-center\"\r\n      style={{ cursor: \"pointer\" }}\r\n      onClick={handlePlay}\r\n    >\r\n      <img src={track.art} style={{ height: \"64px\", width: \"64px\" }} />\r\n      <div className=\"m-3\">\r\n        <div>{track.name}</div>\r\n        {/* <div className=\"text-muted\">{track.artist}</div> */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ArtistSearchResult({ artist, getArtistTracks }) {\r\n  function handleClick() {\r\n    getArtistTracks(artist.name);\r\n  }\r\n  return (\r\n    <div\r\n      className=\"d-flex m-2 align-items-center\"\r\n      style={{ cursor: \"pointer\" }}\r\n      onClick={handleClick}\r\n    >\r\n      <img src={artist.artistUrl} style={{ height: \"64px\", width: \"64px\" }} />\r\n      <div className=\"m-3\">\r\n        <div>{artist.name}</div>\r\n        {/* <div className=\"text-muted\">{track.artist}</div> */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport SpotifyPlayer from \"react-spotify-web-playback\";\r\nimport { useState, useEffect } from \"react\";\r\nexport default function Player({ accessToken, trackUri }) {\r\n  const [play, setPlay] = useState(false);\r\n  useEffect(() => setPlay(true), [trackUri]);\r\n  if (!accessToken) return null;\r\n\r\n  return (\r\n    <SpotifyPlayer\r\n      token={accessToken}\r\n      showSaveIcon\r\n      callback={(state) => {\r\n        if (!state.isPlaying) setPlay(false);\r\n      }}\r\n      play={play}\r\n      uris={trackUri ? [trackUri] : []}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport useAuth from \"./useAuth\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Container, Form } from \"react-bootstrap\";\r\nimport SpotifyWebApi from \"spotify-web-api-node\";\r\nimport TrackSearchResult from \"./TrackSearchResult\";\r\nimport ArtistSearchResult from \"./ArtistSearchResult\";\r\nimport Player from \"./Player\";\r\n\r\nconst spotifyApi = new SpotifyWebApi({\r\n  client_id: \"9065c82d679c48b09c2df99999c34034\",\r\n});\r\nexport default function Dashboard({ code }) {\r\n  const accessToken = useAuth(code);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [albumResults, setAlbumResults] = useState([]);\r\n  const [trackResults, setTrackResults] = useState([]);\r\n  // console.log(searchResults);\r\n  // console.log(albumResults);\r\n  const [playingTrack, setPlayingTrack] = useState([]);\r\n  //console.log(searchResults);\r\n\r\n  function chooseTrack(track) {\r\n    setPlayingTrack(track);\r\n    setSearch(\"\");\r\n  }\r\n\r\n  function getArtistTracks(artistName) {\r\n    setSearch(\"\");\r\n    spotifyApi\r\n      .searchTracks(\"artist:\" + artistName, { limit: 50 })\r\n      .then((res) => {\r\n        setTrackResults(\r\n          res.body.tracks.items.map((track) => {\r\n            var trackImage = \"\";\r\n            //console.log(track);\r\n            try {\r\n              trackImage = track.album.images[2].url;\r\n            } catch (err) {\r\n              console.log(err.message);\r\n            }\r\n            return {\r\n              name: track.name,\r\n              uri: track.uri,\r\n              art: trackImage,\r\n            };\r\n          })\r\n        );\r\n      });\r\n  }\r\n  useEffect(() => {\r\n    if (!accessToken) return;\r\n    spotifyApi.setAccessToken(accessToken);\r\n  }, [accessToken]);\r\n\r\n  useEffect(() => {\r\n    if (!search) return setSearchResults([]);\r\n    if (!accessToken) return;\r\n\r\n    let cancel = false;\r\n    (async () => {\r\n      let res = await spotifyApi.searchArtists(search);\r\n      //console.log(res.body);\r\n      setSearchResults(\r\n        res.body.artists.items.map((artist) => {\r\n          //console.log(artist);\r\n          // if (typeof artist.image != \"undefined\") {\r\n          //   var artistImage = artist.images[0].url;\r\n          //   console.log(artistImage);\r\n          // }\r\n          var artistImage = \"\";\r\n          try {\r\n            artistImage = artist.images[0].url;\r\n          } catch (err) {\r\n            console.log(\"No image\");\r\n          }\r\n          //console.log(artist);\r\n          return {\r\n            name: artist.name,\r\n            // title: track.name,\r\n            id: artist.id,\r\n            artistUrl: artistImage,\r\n          };\r\n        })\r\n      );\r\n    })();\r\n    //return () => (cancel = true);\r\n  }, [search, accessToken]);\r\n  return (\r\n    <Container className=\"d-flex flex-column py-2\" style={{ height: \"100vh\" }}>\r\n      <Form.Control\r\n        type=\"search\"\r\n        placeholder=\"Search Artists\"\r\n        value={search}\r\n        onChange={(e) => setSearch(e.target.value)}\r\n      ></Form.Control>\r\n      <div className=\"flex-grow-1 my-2\" style={{ overflowY: \"auto\" }}>\r\n        {searchResults.map((artist) => (\r\n          <ArtistSearchResult\r\n            artist={artist}\r\n            getArtistTracks={getArtistTracks}\r\n          />\r\n        ))}\r\n        {trackResults.map((track) => (\r\n          <TrackSearchResult track={track} chooseTrack={chooseTrack} />\r\n        ))}\r\n      </div>\r\n      <div>\r\n        <Player accessToken={accessToken} trackUri={playingTrack?.uri}></Player>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n","import \"./App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport SpotifyLogin from \"./components/SpotifyLogin\";\nimport Dashboard from \"./components/Dashboard\";\nconst code = new URLSearchParams(window.location.search).get(\"code\");\nfunction App() {\n  return code ? <Dashboard code={code} /> : <SpotifyLogin />;\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/* (ignored) */"]}}